<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Dự đoán giá nhà đất</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    * {box-sizing: border-box;}
    body {
      font-family: 'Roboto', sans-serif;
      margin: 0;
      background: linear-gradient(135deg,#4facfe,#00f2fe);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .container {
      background: #fff;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      width: 100%;
      max-width: 900px;
      overflow: hidden;
    }
    .header {
      text-align: center;
      padding: 30px 20px 10px;
    }
    .header h2 {
      margin: 0;
      font-size: 28px;
      color: #333;
    }
    form {
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(250px,1fr));
      gap: 20px;
      padding: 30px;
    }
    label {
      display: block;
      font-weight: 500;
      margin-bottom: 6px;
      color: #555;
    }
    input[type="number"], select {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #ddd;
      border-radius: 10px;
      font-size: 14px;
      transition: all .2s;
    }
    input[type="number"]:focus, select:focus {
      border-color: #4facfe;
      outline: none;
      box-shadow: 0 0 0 3px rgba(79,172,254,0.2);
    }
    .full-width {
      grid-column: 1/-1;
    }
    button {
      background: linear-gradient(45deg,#4facfe,#00f2fe);
      color: #fff;
      border: none;
      padding: 14px 20px;
      border-radius: 12px;
      font-size: 16px;
      cursor: pointer;
      font-weight: 600;
      width: 100%;
      transition: transform .2s, box-shadow .2s;
    }
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.15);
    }
    .result {
      text-align: center;
      padding: 20px;
      font-size: 18px;
      color: #333;
      background: #f7f9fb;
      border-top: 1px solid #eee;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h2>Dự đoán giá nhà đất Việt Nam</h2>
    </div>
    <!-- Form chắc chắn dùng POST -->
    <form method="post" action="/predict">
      <div>
        <label>Tỉnh/Thành phố:</label>
        <select name="province" required>
          {% for p in provinces %}
            <option value="{{p}}" {% if form_data.province==p %}selected{% endif %}>{{p}}</option>
          {% endfor %}
        </select>
      </div>

      <div>
        <label>Diện tích (m²):</label>
        <input type="number" step="0.1" name="area" value="{{form_data.area or ''}}" required>
      </div>

      <div>
        <label>Mặt tiền (m):</label>
        <input type="number" step="0.1" name="frontage" value="{{form_data.frontage or ''}}" required>
      </div>

      <div>
        <label>Đường vào (m):</label>
        <input type="number" step="0.1" name="access_road" value="{{form_data.access_road or ''}}" required>
      </div>

      <div>
        <label>Số tầng:</label>
        <input type="number" name="floors" value="{{form_data.floors or ''}}" required>
      </div>

      <div>
        <label>Phòng ngủ:</label>
        <input type="number" name="bedrooms" value="{{form_data.bedrooms or ''}}" required>
      </div>

      <div>
        <label>Phòng tắm:</label>
        <input type="number" name="bathrooms" value="{{form_data.bathrooms or ''}}" required>
      </div>

      <div>
        <label>Hướng nhà:</label>
        <select name="house_direction" required>
          {% for h in house_directions %}
            <option value="{{h}}" {% if form_data.house_direction==h %}selected{% endif %}>{{h}}</option>
          {% endfor %}
        </select>
      </div>

      <div>
        <label>Hướng ban công:</label>
        <select name="balcony_direction" required>
          {% for b in balcony_directions %}
            <option value="{{b}}" {% if form_data.balcony_direction==b %}selected{% endif %}>{{b}}</option>
          {% endfor %}
        </select>
      </div>

      <div>
        <label>Tình trạng pháp lý:</label>
        <select name="legal_status" required>
          {% for l in legal_statuses %}
            <option value="{{l}}" {% if form_data.legal_status==l %}selected{% endif %}>{{l}}</option>
          {% endfor %}
        </select>
      </div>

      <div>
        <label>Tình trạng nội thất:</label>
        <select name="furniture_state" required>
          {% for f in furniture_states %}
            <option value="{{f}}" {% if form_data.furniture_state==f %}selected{% endif %}>{{f}}</option>
          {% endfor %}
        </select>
      </div>

      <div>
        <label>Chọn mô hình:</label>
        <select name="model_choice" required>
          {% for m in models %}
            <option value="{{m}}" {% if form_data.model_choice==m %}selected{% endif %}>{{m}}</option>
          {% endfor %}
        </select>
      </div>

      <div class="full-width">
        <button type="submit">Dự đoán</button>
      </div>
    </form>

    {% if prediction %}
      <div class="result">
        Kết quả dự đoán: <strong>{{ prediction }}</strong>
      </div>
    {% endif %}
  </div>
</body>
</html>
